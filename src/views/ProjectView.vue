<script setup lang="ts">
import { onMounted } from 'vue'
import { gsap } from 'gsap'
import { ScrollTrigger } from 'gsap/ScrollTrigger'

gsap.registerPlugin(ScrollTrigger)

onMounted(() => {
  // .horizontal-container ìš”ì†Œë¥¼ HTMLElement íƒ€ì…ìœ¼ë¡œ ì°¾ì•„ì„œ ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
  const horizontalContainer = document.querySelector('.horizontal-container') as HTMLElement

  // ë§Œì•½ ìš”ì†Œë¥¼ ì°¾ì§€ ëª»í–ˆë‹¤ë©´, ì• ë‹ˆë©”ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³  í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.
  if (!horizontalContainer) {
    return
  }

  const panels = gsap.utils.toArray('.project-panel')

  gsap.to(panels, {
    xPercent: -100 * (panels.length - 1),
    ease: 'none',
    scrollTrigger: {
      trigger: horizontalContainer, // ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
      pin: true,
      scrub: 1,
      snap: 1 / (panels.length - 1),
      // ğŸ‘‡ ë” ì•ˆì „í•˜ê³  ëª…í™•í•˜ê²Œ offsetWidthë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
      end: () => '+=' + horizontalContainer.offsetWidth,
    },
  })
})
</script>

<template>
  <div class="projects-page">
    <section class="intro-section">
      <h1>SI / SM Projects</h1>
      <p>í¬ë² ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í•œ ì‹œìŠ¤í…œ í†µí•© ë° ìœ ì§€ë³´ìˆ˜ í”„ë¡œì íŠ¸ë“¤ì…ë‹ˆë‹¤.</p>
    </section>

    <div class="horizontal-container">
      <div class="project-panel project-cuckoo">
        <div class="panel-content">
          <h2>ì¿ ì¿  í†µí•© ì‹œìŠ¤í…œ êµ¬ì¶•</h2>
          <p>78ê°œ ì˜ì—…ì±„ë„ì˜ ì£¼ë¬¸, ë°°ì†¡, ì¬ê³ ë¥¼ ê´€ë¦¬í•˜ëŠ” ì°¨ì„¸ëŒ€ ì‹œìŠ¤í…œ</p>
        </div>
      </div>
      <div class="project-panel project-nonghyup">
        <div class="panel-content">
          <h2>ì˜ë“±í¬ë†í˜‘ ë¸Œëœë“œëª° & SSO</h2>
          <p>ì˜¨ë¼ì¸ ë¸Œëœë“œëª°ê³¼ í†µí•© ì¸ì¦(SSO) ì‹œìŠ¤í…œ</p>
        </div>
      </div>
      <div class="project-panel project-autocrypt">
        <div class="panel-content">
          <h2>ì•„ìš°í† í¬ë¦½íŠ¸ ìë™ì°¨ ë³´ì•ˆ ì‹œìŠ¤í…œ</h2>
          <p>ìë™ì°¨ ë³´ì•ˆ ì·¨ì•½ì  ì •ë³´ ì œê³µì„ ìœ„í•œ K-CSMS ì»¤ë®¤ë‹ˆí‹°</p>
        </div>
      </div>
      <div class="project-panel project-dhlottery">
        <div class="panel-content">
          <h2>ë™í–‰ë³µê¶Œ ì¸ì‡„ë³µê¶Œ ì‹œìŠ¤í…œ</h2>
          <p>ì´ì›í™”ëœ ì¸ì‡„ë³µê¶Œ ì‹œìŠ¤í…œ í†µí•© ë° DB ì „í™˜</p>
        </div>
      </div>
    </div>

    <section class="outro-section">
      <h2>ë” ë§ì€ í”„ë¡œì íŠ¸ê°€ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?</h2>
      <button>ë¬¸ì˜í•˜ê¸°</button>
    </section>
  </div>
</template>

<style scoped>
.projects-page {
  background-color: #007aff;
  color: #fff;
}

.intro-section,
.outro-section {
  padding: 8rem 2rem;
  text-align: center;
}

/* ê°€ë¡œ ìŠ¤í¬ë¡¤ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆ */
.horizontal-container {
  display: flex;
  flex-wrap: nowrap; /* ì ˆëŒ€ ì¤„ë°”ê¿ˆë˜ì§€ ì•Šë„ë¡ ì„¤ì • */
  width: 400%; /* íŒ¨ë„ 4ê°œì˜ ë„ˆë¹„ë§Œí¼ ì„¤ì • */
}

/* ê° í”„ë¡œì íŠ¸ íŒ¨ë„(ì¹´ë“œ) ìŠ¤íƒ€ì¼ */
.project-panel {
  width: 100vw; /* í™”ë©´ ë„ˆë¹„ë§Œí¼ ê½‰ ì±„ì›€ */
  height: 100vh; /* í™”ë©´ ë†’ì´ë§Œí¼ ê½‰ ì±„ì›€ */
  display: flex;
  align-items: center;
  justify-content: center;
  background-size: cover;
  background-position: center;
  position: relative;
}

.panel-content {
  text-align: center;
  background-color: rgba(0, 0, 0, 0.5);
  padding: 2rem;
  border-radius: 12px;
}

/* ê° íŒ¨ë„ì— ë‹¤ë¥¸ ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì • */
.project-cuckoo {
  background-color: #eaeaea;
}
.project-nonghyup {
  background-image: url('@/assets/image/feature_1.svg');
}
.project-autocrypt {
  background-image: url('@/assets/image/feature_1.svg');
}
.project-dhlottery {
  background-image: url('@/assets/image/feature_1.svg'); /* ì´ ì´ë¯¸ì§€ëŠ” ì¶”ê°€ë¡œ ì¤€ë¹„í•´ì•¼ í•©ë‹ˆë‹¤. */
}
</style>
